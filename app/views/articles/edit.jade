extend ../admin-layout

block content
  if create
    - var title = 'Create'
    - var action = '/admin/articles/'
  else
    - var title = 'Edit'
    - var action = '/admin/articles/' + article.id

  h1 #{title} Article

  form(action=action, method='post')
    unless create
      input(type='hidden', name='_method', value='PUT')

    .form-group
      if category
        label Category: #{category.name}
        input(type='hidden', name='article[category]', value=category.id)
      else
        label Category
        select.form-control(name='article[category]')
          each cat in categories
            if article.category
              - var article_category = article.category.id
            unless category.name === 'root'
              option(value=cat.id, selected=cat.id==article_category)= cat.name
    .form-group
      label Title
      input.form-control(type='text', name='article[title]', value=article.title)
    .form-group
      label Text
      textarea.form-control(name='article[text]')
        != article.text
    .form-group
      a.btn.btn-danger(href='/admin/articles') Cancel
      button.btn.btn-primary Save

